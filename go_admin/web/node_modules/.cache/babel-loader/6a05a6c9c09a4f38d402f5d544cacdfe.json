{"remainingRequest":"E:\\BaiduNetdiskDownload\\gin-vue-admin\\web\\node_modules\\_babel-loader@8.2.2@babel-loader\\lib\\index.js!E:\\BaiduNetdiskDownload\\gin-vue-admin\\web\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js??ref--0-0!E:\\BaiduNetdiskDownload\\gin-vue-admin\\web\\node_modules\\_vue-loader@15.9.6@vue-loader\\lib\\index.js??vue-loader-options!E:\\BaiduNetdiskDownload\\gin-vue-admin\\web\\src\\view\\superAdmin\\authority\\components\\menus.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\BaiduNetdiskDownload\\gin-vue-admin\\web\\src\\view\\superAdmin\\authority\\components\\menus.vue","mtime":1618795335793},{"path":"E:\\BaiduNetdiskDownload\\gin-vue-admin\\web\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\BaiduNetdiskDownload\\gin-vue-admin\\web\\node_modules\\_babel-loader@8.2.2@babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\BaiduNetdiskDownload\\gin-vue-admin\\web\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\BaiduNetdiskDownload\\gin-vue-admin\\web\\node_modules\\_vue-loader@15.9.6@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkU6L0JhaWR1TmV0ZGlza0Rvd25sb2FkL2dpbi12dWUtYWRtaW4vd2ViL25vZGVfbW9kdWxlcy9fQGJhYmVsX3J1bnRpbWVANy4xMy4xMEBAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgZ2V0QmFzZU1lbnVUcmVlLCBnZXRNZW51QXV0aG9yaXR5LCBhZGRNZW51QXV0aG9yaXR5IH0gZnJvbSAnQC9hcGkvbWVudSc7CmltcG9ydCB7IHVwZGF0ZUF1dGhvcml0eSB9IGZyb20gIkAvYXBpL2F1dGhvcml0eSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnTWVudXMnLAogIHByb3BzOiB7CiAgICByb3c6IHsKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIHt9OwogICAgICB9LAogICAgICB0eXBlOiBPYmplY3QKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBtZW51VHJlZURhdGE6IFtdLAogICAgICBtZW51VHJlZUlkczogW10sCiAgICAgIG5lZWRDb25maXJtOiBmYWxzZSwKICAgICAgbWVudURlZmF1bHRQcm9wczogewogICAgICAgIGNoaWxkcmVuOiAnY2hpbGRyZW4nLAogICAgICAgIGxhYmVsOiBmdW5jdGlvbiBsYWJlbChkYXRhKSB7CiAgICAgICAgICByZXR1cm4gZGF0YS5tZXRhLnRpdGxlOwogICAgICAgIH0KICAgICAgfQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHNldERlZmF1bHQ6IGZ1bmN0aW9uIHNldERlZmF1bHQoZGF0YSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgcmVzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZUF1dGhvcml0eSh7CiAgICAgICAgICAgICAgICAgIGF1dGhvcml0eUlkOiBfdGhpcy5yb3cuYXV0aG9yaXR5SWQsCiAgICAgICAgICAgICAgICAgIEF1dGhvcml0eU5hbWU6IF90aGlzLnJvdy5hdXRob3JpdHlOYW1lLAogICAgICAgICAgICAgICAgICBwYXJlbnRJZDogX3RoaXMucm93LnBhcmVudElkLAogICAgICAgICAgICAgICAgICBkZWZhdWx0Um91dGVyOiBkYXRhLm5hbWUKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PSAwKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogIuiuvue9ruaIkOWKnyIKICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICBfdGhpcy5yb3cuZGVmYXVsdFJvdXRlciA9IHJlcy5kYXRhLmF1dGhvcml0eS5kZWZhdWx0Um91dGVyOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgbm9kZUNoYW5nZTogZnVuY3Rpb24gbm9kZUNoYW5nZSgpIHsKICAgICAgdGhpcy5uZWVkQ29uZmlybSA9IHRydWU7CiAgICB9LAogICAgLy8g5pq06Zyy57uZ5aSW5bGC5L2/55So55qE5YiH5o2i5oum5oiq57uf5LiA5pa55rOVCiAgICBlbnRlckFuZE5leHQ6IGZ1bmN0aW9uIGVudGVyQW5kTmV4dCgpIHsKICAgICAgdGhpcy5yZWxhdGlvbigpOwogICAgfSwKICAgIC8vIOWFs+iBlOagkSDnoa7orqTmlrnms5UKICAgIHJlbGF0aW9uOiBmdW5jdGlvbiByZWxhdGlvbigpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgY2hlY2tBcnIsIHJlczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY2hlY2tBcnIgPSBfdGhpczIuJHJlZnMubWVudVRyZWUuZ2V0Q2hlY2tlZE5vZGVzKGZhbHNlLCB0cnVlKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBhZGRNZW51QXV0aG9yaXR5KHsKICAgICAgICAgICAgICAgICAgbWVudXM6IGNoZWNrQXJyLAogICAgICAgICAgICAgICAgICBhdXRob3JpdHlJZDogX3RoaXMyLnJvdy5hdXRob3JpdHlJZAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0Mi5zZW50OwoKICAgICAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PSAwKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMi4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfoj5zljZXorr7nva7miJDlip8hJwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgIHZhciByZXMsIHJlczEsIG1lbnVzLCBhcnI7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiBnZXRCYXNlTWVudVRyZWUoKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICBfdGhpczMubWVudVRyZWVEYXRhID0gcmVzLmRhdGEubWVudXM7CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA2OwogICAgICAgICAgICAgIHJldHVybiBnZXRNZW51QXV0aG9yaXR5KHsKICAgICAgICAgICAgICAgIGF1dGhvcml0eUlkOiBfdGhpczMucm93LmF1dGhvcml0eUlkCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgcmVzMSA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICAgIG1lbnVzID0gcmVzMS5kYXRhLm1lbnVzOwogICAgICAgICAgICAgIGFyciA9IFtdOwogICAgICAgICAgICAgIG1lbnVzLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgLy8g6Ziy5q2i55u05o6l6YCJ5Lit54i257qn6YCg5oiQ5YWo6YCJCiAgICAgICAgICAgICAgICBpZiAoIW1lbnVzLnNvbWUoZnVuY3Rpb24gKHNhbWUpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHNhbWUucGFyZW50SWQgPT09IGl0ZW0ubWVudUlkOwogICAgICAgICAgICAgICAgfSkpIHsKICAgICAgICAgICAgICAgICAgYXJyLnB1c2goTnVtYmVyKGl0ZW0ubWVudUlkKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgX3RoaXMzLm1lbnVUcmVlSWRzID0gYXJyOwoKICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUzKTsKICAgIH0pKSgpOwogIH0KfTs="},{"version":3,"sources":["menus.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"clearflex\">\r\n      <el-button @click=\"relation\" class=\"fl-right\" size=\"small\" type=\"primary\">确 定</el-button>\r\n    </div>\r\n    <el-tree\r\n      :data=\"menuTreeData\"\r\n      :default-checked-keys=\"menuTreeIds\"\r\n      :props=\"menuDefaultProps\"\r\n      @check=\"nodeChange\"\r\n      default-expand-all\r\n      highlight-current\r\n      node-key=\"ID\"\r\n      ref=\"menuTree\"\r\n      show-checkbox\r\n    >\r\n     <span class=\"custom-tree-node\" slot-scope=\"{ node , data }\">\r\n        <span>{{ node.label }}</span>\r\n        <span>\r\n          <el-button\r\n            type=\"text\"\r\n            size=\"mini\"\r\n            :style=\"{color:row.defaultRouter == data.name?'#E6A23C':'#85ce61'}\"\r\n            :disabled=\"!node.checked\"\r\n            @click=\"() => setDefault(data)\">\r\n            {{row.defaultRouter == data.name?\"首页\":\"设为首页\"}}\r\n          </el-button>\r\n        </span>\r\n      </span>\r\n    </el-tree>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { getBaseMenuTree, getMenuAuthority, addMenuAuthority } from '@/api/menu'\r\nimport {\r\n  updateAuthority,\r\n} from \"@/api/authority\";\r\nexport default {\r\n  name: 'Menus',\r\n  props: {\r\n    row: {\r\n      default: function() {\r\n        return {}\r\n      },\r\n      type: Object\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      menuTreeData: [],\r\n      menuTreeIds: [],\r\n      needConfirm:false,\r\n      menuDefaultProps: {\r\n        children: 'children',\r\n        label: function(data){\r\n          return data.meta.title\r\n        }\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    async setDefault(data){\r\n      const res = await updateAuthority({authorityId: this.row.authorityId,AuthorityName: this.row.authorityName,parentId: this.row.parentId,defaultRouter:data.name})\r\n      if(res.code == 0){\r\n        this.$message({type:\"success\",message:\"设置成功\"})\r\n        this.row.defaultRouter = res.data.authority.defaultRouter\r\n      }\r\n    },\r\n    nodeChange(){\r\n      this.needConfirm = true\r\n    },\r\n    // 暴露给外层使用的切换拦截统一方法\r\n    enterAndNext(){\r\n      this.relation()\r\n    },\r\n    // 关联树 确认方法\r\n    async relation() {\r\n      const checkArr = this.$refs.menuTree.getCheckedNodes(false, true)\r\n      const res = await addMenuAuthority({\r\n        menus: checkArr,\r\n        authorityId: this.row.authorityId\r\n      })\r\n      if (res.code == 0) {\r\n        this.$message({\r\n          type: 'success',\r\n          message: '菜单设置成功!'\r\n        })\r\n      }\r\n    }\r\n  },\r\n  async created() {\r\n    // 获取所有菜单树\r\n    const res = await getBaseMenuTree()\r\n    this.menuTreeData = res.data.menus\r\n\r\n    const res1 = await getMenuAuthority({ authorityId: this.row.authorityId })\r\n    const menus = res1.data.menus\r\n    const arr = []\r\n    menus.map(item => {\r\n      // 防止直接选中父级造成全选\r\n      if (!menus.some(same => same.parentId === item.menuId)) {\r\n        arr.push(Number(item.menuId))\r\n      }\r\n    })\r\n    this.menuTreeIds = arr\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\">\r\n</style>"],"sourceRoot":"src/view/superAdmin/authority/components"}]}